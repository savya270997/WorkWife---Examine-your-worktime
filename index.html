<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="icon" type="image/png" href="./assets/logoFinal.png" />

    <title>Work Wife</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="app">
      <header>
        <div class="brand">
          <div class="logo">
            <img src="./assets/logoFinal.png" alt="" />
          </div>
          <div>
            <h1>Work Wife</h1>
          </div>
        </div>
        <div class="theme-toggle">
          <select id="themeSelect">
            <option value="strangerThings">Stranger Things</option>
            <option value="hawkinsDaylight">Hawkins Daylight</option>
            <option value="upsideDown">Upside Down</option>
            <option value="synthwaveNeon">Synthwave Neon</option>
          </select>
        </div>
      </header>

      <nav class="tabs" role="tablist" aria-label="Main navigation">
        <button class="tab-btn active" data-tab="dashboard">Dashboard</button>
        <button class="tab-btn" data-tab="log">Log</button>
        <button class="tab-btn" data-tab="config">Config</button>
      </nav>

      <!-- Dashboard -->
      <section id="dashboard" class="panel" role="tabpanel">
        <div class="dash-row dash-row--toolbar">
          <div class="month-carousel" aria-label="Month selector">
            <button id="monthPrev" class="month-arrow" title="Previous month">
              ‹
            </button>
            <div id="monthPill" class="month-pill" tabindex="0"></div>
            <button id="monthNext" class="month-arrow" title="Next month">
              ›
            </button>
          </div>

          <input id="monthSelect" type="month" class="hidden" />

          <div class="toolbar-actions">
            <button id="btnExportCSV" class="btn ghost small">
              Export CSV
            </button>

            <label class="btn ghost small" for="csvImportInput"
              >Import CSV</label
            >
            <input id="csvImportInput" type="file" accept=".csv" hidden />

            <button id="btnClear" class="btn ghost small">Reset</button>
          </div>
        </div>
        <div class="dash-row dash-row--split">
          <!-- Progress -->
          <div class="progress-card">
            <div class="progress-top">
              <div>
                <div class="progress-big" id="progTitle">Monthly goal</div>
                <div class="muted" id="goalSummary">
                  0 hours required • 0 logged
                </div>
              </div>

              <div class="progress-right">
                <div id="percentLabel" class="progress-percent">0%</div>
                <div id="overtimeLabel" class="muted small">Over/Under: 0h</div>
              </div>
            </div>

            <div class="progress-bar-wrap">
              <div id="progressBar" class="progress-bar"></div>
            </div>

            <div class="progress-meta">
              <div class="view-pill" id="viewLabel">This month</div>
              <div class="muted small">
                Updated: <span id="lastUpdated">—</span>
              </div>
            </div>

            <div id="leaveAdvice" class="muted"></div>
          </div>
        </div>
        <!-- ROW 1 : DAILY SNAPSHOT -->
        <div class="dash-row dash-row--primary">
          <div class="stat-card">
            <div class="stat-title">Avg In Time</div>
            <div class="stat-value" id="avgInTime">—</div>
          </div>

          <div class="stat-card">
            <div class="stat-title">Avg Out Time</div>
            <div class="stat-value" id="avgOutTime">—</div>
          </div>

          <div class="stat-card">
            <div class="stat-title">Avg Office Hours / Day</div>
            <div class="stat-value" id="avgOfficeHours">—</div>
          </div>

          <div class="stat-card accent">
            <div class="stat-title">RTO Days Left</div>
            <div class="stat-value" id="officeRemaining">—</div>
          </div>
        </div>
        <!-- ROW 2 : MONTHLY COMPARISON -->
        <div class="dash-row dash-row--insights">
          <div class="stat-card">
            <div class="stat-title">Office Time</div>
            <div class="stat-value">+6.2% <span class="trend up">▲</span></div>
            <div class="stat-sub">vs last month</div>
          </div>

          <div class="stat-card">
            <div class="stat-title">Login Time</div>
            <div class="stat-value">
              -9 min <span class="trend down">▼</span>
            </div>
            <div class="stat-sub">earlier than last month</div>
          </div>

          <div class="stat-card">
            <div class="stat-title">Logout Time</div>
            <div class="stat-value">
              +18 min <span class="trend up">▲</span>
            </div>
            <div class="stat-sub">later than last month</div>
          </div>
        </div>
        <!-- ROW 3 : TRENDS -->
        <div class="dash-row dash-row--charts">
          <div class="chart-card">
            <div class="chart-header">
              <strong>Last 30 Days — Actual vs Planned</strong>
            </div>
            <svg id="chartSVG" class="chart-svg"></svg>
          </div>

          <div class="chart-card">
            <div class="chart-header">
              <strong>Weekly Leaves</strong>
            </div>
            <svg id="chartLeaveSVG" class="chart-svg"></svg>
          </div>
        </div>
        <!-- ROW 4 : ACTION GUIDANCE -->
        <div class="dash-row">
          <div class="panel notice">
            <div id="leaveAdvice">
              <!-- JS already injects content here -->
            </div>
          </div>
        </div>
        <!-- ROW 5 : LOGS -->
        <div class="dash-row">
          <div class="logs-card">
            <div class="logs-header">
              <strong>All Logs</strong>
              <span class="muted">Sorted by date (newest first)</span>
            </div>

            <table id="logsTable">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>In</th>
                  <th>Out</th>
                  <th>Total Hours</th>
                  <th>Type</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="logsBody"></tbody>
            </table>

            <div class="pager">
              <div id="logsPagerInfo"></div>
              <div class="pager-actions">
                <button id="pagerPrev" class="btn ghost small">Prev</button>
                <button id="pagerNext" class="btn ghost small">Next</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Log -->
      <section id="log" class="panel hidden" role="tabpanel" aria-hidden="true">
        <div style="display: flex; flex-direction: column; gap: 10px">
          <form id="logForm" class="log-form">
            <div class="row">
              <div class="col">
                <label for="logDate">Date</label>
                <input id="logDate" type="date" required />
              </div>
              <div class="col">
                <label>Type</label>
                <div class="type-row" id="typeRow">
                  <label class="radio"
                    ><input
                      type="radio"
                      name="logType"
                      value="Office"
                      checked
                    />
                    Office Day</label
                  >
                  <label class="radio"
                    ><input type="radio" name="logType" value="WFH" /> WFH
                    (optional)</label
                  >
                  <label class="radio"
                    ><input type="radio" name="logType" value="Leave" /> Full
                    Day Leave</label
                  >
                </div>
              </div>
            </div>

            <div class="row" id="hoursRow" style="padding: 8px 0; gap: 8px">
              <div class="col" style="grid-column: 1/-1">
                <!-- single-row: In / Out / Actions -->
                <div
                  class="log-row"
                  style="display: flex; align-items: center; gap: 8px"
                >
                  <div
                    class="time-col"
                    style="display: flex; flex-direction: column; gap: 6px"
                  >
                    <label class="time-input-label" for="inTime">In Time</label>
                    <div class="time-input-wrapper">
                      <input id="inTime" type="time" />
                    </div>
                  </div>

                  <div
                    class="time-col"
                    style="display: flex; flex-direction: column; gap: 6px"
                  >
                    <label class="time-input-label" for="outTime"
                      >Out Time</label
                    >
                    <div class="time-input-wrapper">
                      <input id="outTime" type="time" />
                    </div>
                  </div>

                  <div
                    style="
                      margin-left: auto;
                      display: flex;
                      gap: 8px;
                      align-items: end;
                    "
                  >
                    <button type="submit" class="btn">Log Entry</button>
                    <button type="button" id="btnToday" class="btn ghost">
                      Today
                    </button>
                  </div>
                </div>

                <!-- spacing (8px) -->
                <div style="height: 8px"></div>
              </div>
            </div>

            <div style="color: var(--muted); font-size: 0.9rem">
              Tip: Enter In/Out times (HH:MM) to auto-calc Hours — you can edit
              Hours manually afterwards. Full-day Leave always stores hours = 0
              (but times can still be saved).
            </div>
          </form>

          <div style="margin-top: 8px; color: var(--muted); font-size: 0.9rem">
            The line chart shows actual hours (logged) vs planned mandatory
            hours per day for the last 30 days.
          </div>
        </div>
      </section>

      <!-- Config -->
      <section
        id="config"
        class="panel hidden"
        role="tabpanel"
        aria-hidden="true"
      >
        <form id="configForm">
          <div class="config-grid">
            <div class="form-row">
              <label for="mandatoryDays">Mandatory Office Days per Week</label>
              <input
                id="mandatoryDays"
                type="number"
                min="1"
                max="7"
                required
              />
            </div>

            <div class="form-row">
              <label for="allowedWFH"
                >Allowed EXTRA WFH Days per Month (reduces required
                hours)</label
              >
              <input id="allowedWFH" type="number" min="0" max="22" required />
            </div>

            <div class="form-row">
              <label for="hoursPerDay">Mandatory Hours per Day</label>
              <input
                id="hoursPerDay"
                type="number"
                step="0.25"
                min="1"
                max="24"
                required
              />
            </div>

            <div class="form-row">
              <label>Weekend Settings</label>
              <div
                style="
                  display: flex;
                  gap: 8px;
                  flex-wrap: wrap;
                  align-items: center;
                "
              >
                <label class="radio"
                  ><input id="satOff" type="checkbox" /> Saturday is OFF</label
                >
                <label class="radio"
                  ><input id="sunOff" type="checkbox" /> Sunday is OFF</label
                >
                <small style="color: var(--muted); display: block; width: 100%"
                  >Toggle whether Saturday or Sunday are considered off days.
                  Remaining weekdays not counted as mandatory are implicit
                  WFH.</small
                >
              </div>
            </div>
          </div>

          <div
            style="
              margin-top: 12px;
              display: flex;
              gap: 12px;
              align-items: center;
              flex-wrap: wrap;
            "
          >
            <div
              style="
                padding: 10px;
                background: var(--card-2);
                border-radius: 8px;
              "
            >
              <div style="font-weight: 800" id="weeklyHoursPreview">0.0</div>
              <div style="color: var(--muted); font-size: 0.9rem">
                Standard Weekly Mandatory Hours
              </div>
            </div>

            <div style="margin-left: auto; display: flex; gap: 8px">
              <button type="submit" class="btn">Save Configuration</button>
              <button type="button" id="btnLoadDefaults" class="btn ghost">
                Defaults
              </button>
            </div>
          </div>
        </form>
      </section>

      <footer
        style="
          margin-top: 18px;
          color: var(--muted);
          font-size: 0.82rem;
          text-align: center;
        "
      >
        Built by SSS(2025)
      </footer>
    </div>

    <script src="app.js"></script>
  </body>
</html>
